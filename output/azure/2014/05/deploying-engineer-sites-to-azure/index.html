<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

            <!-- Facebook meta tags -->
        <meta property="og:site_name" content="Tyler Butler" />
                    <meta property="og:type" content="article" />
            <meta property="og:url" content="http://www.tylerbutler.com/2014/05/deploying-engineer-sites-to-azure/" />
            <meta property="og:title" content="Deploying Engineer Sites to Azure" />
                        
    <title>    Deploying Engineer Sites to Azure    : Tyler Butler
</title>

    
    <link rel="alternate" type="application/atom+xml"
          title="Tyler Butler Atom Feed"
          href="http://feeds.feedburner.com/TylerButlerAllPosts"/>

                            <link rel="stylesheet" href="/static/bundled/dark_rainbow.a7b5e1bc.css" type="text/css"/>
                            
            <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
    <!--suppress JSUnresolvedLibraryURL -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script>
        if (window.jQuery == undefined) {
                            document.write('<script src="/static/bundled/jquery.8fc25e27.js"><\/script>');
                    }
    </script>

        <!--suppress JSUnresolvedLibraryURL -->
    <script type="text/javascript"
            src="//use.typekit.net/vty2qol.js"></script>
    <script type="text/javascript">
        try {
            // noinspection JSUnresolvedVariable
            Typekit.load();
        }
        catch (e) {
        }
    </script>

    
    
            <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26061862-1']);
    _gaq.push(['_setDomainName', 'tylerbutler.com']);

    // track speed for all users; traffic is low enough this shouldn't be a problem
    _gaq.push(['_setSiteSpeedSampleRate', 100]);
    
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>    
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body class=""><!--[if lt IE 7]>
    <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->                        <div id="fb-root"></div>
            <script>(function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) {
                    return;
                }
                js = d.createElement(s);
                js.id = id;
                js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=298536070167430&version=v2.0";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));</script>
                <div class="container">            <header id="primary" class="row">                                            <h1 class="small-12 medium-5 columns">
                            <a href="/">                                    tyler
                                    <span class="highlight">butler</span>
                                </a>
                        </h1>
                                                        <nav class="small-12 medium-7 columns">                            <ul class="nav navbar-nav">
    
                <li class="current">
        <a href="/">articles</a></li>
                <li>
        <a href="/projects">projects</a></li>
</ul>

                        </nav>
                </header>
        <div class="row">                <section id="main"
                         class="twelve columns"
                         role="main">    <div class="row">
            <div class="post-info medium-3 large-2 columns">
            <div class="post-date">
                                    <div class="month">MAY</div>
                    <div class="day">06</div>
                    <div class="year">2014</div>
                    <div class="permalink">
                        <a href="/2014/05/deploying-engineer-sites-to-azure/"
                           title="Permanent link to 'Deploying Engineer Sites to Azure'">∞</a>
                    </div>
                            </div>
                                        <ul class="tags">
                                            <li><a href="/tag/engineer">engineer</a>
                        </li>
                                            <li><a href="/tag/azure">azure</a>
                        </li>
                                    </ul>
                                        <div class="sharing hide-for-small-only">
                                            <div>
    <a href="https://twitter.com/share" class="twitter-share-button"
                   data-via="tylerbutler"
       data-related="tylerbutler"
                   data-url="http://www.tylerbutler.com/2014/05/deploying-engineer-sites-to-azure/"
       data-count="none"
       data-dnt="true">
        Tweet
    </a>
</div>
<script>!function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
    if (!d.getElementById(id)) {
        js = d.createElement(s);
        js.id = id;
        js.src = p + '://platform.twitter.com/widgets.js';
        fjs.parentNode.insertBefore(js, fjs);
    }
}(document, 'script', 'twitter-wjs');</script>                    
                                            <div>
    <div class="fb-share-button"
         data-href="http://www.tylerbutler.com/2014/05/deploying-engineer-sites-to-azure/"
         data-layout="button">
    </div>
</div>                                    </div>
                    </div>
    
                        <article class="post-content medium-9 large-10 columns">
                <time datetime="2014-05-06 PDT"
                      pubdate=""></time>
                <header>
                    <h1>
                        <a href="        /2014/05/deploying-engineer-sites-to-azure/">Deploying Engineer Sites to Azure</a>
                                            </h1>
                </header>
                                    <p>A <a href="https://github.com/tylerbutler/engineer/issues/51">longstanding issue</a> in the Engineer issue tracker concerns documenting some of the free/low-cost hosting options one has to host an Engineer site. <a href="http://pages.github.com/">GitHub Pages</a> is a common request, and documenting that process is definitely on my to-do list, but I think there&#8217;s a better option:&nbsp;Azure.</p>
<p>I&#8217;ve been hosting tylerbutler.com on Azure for the past few months, and I have to say, I&#8217;m very pleased with it so far. It&#8217;s probably not the most cost-effective thing for my site, but if you have an <span class="caps">MSDN</span> subscription, which many .Net developers have (including me), then you have a monthly Azure credit that is almost certainly enough to cover the cost of deploying your Engineer site to&nbsp;Azure.</p>
<p>Deploying on Azure has the benefits of auto-scaling to handle traffic demands, though that&#8217;s not particularly compelling for Engineer-based sites since static sites by nature tend to be very scalable anyway. The truly compelling feature, in my opinion, is that it lets you maintain your built Engineer site in a Git or Mercurial repository, which is something that developers in particular really like. It is, after all, one of the nice things about GitHub pages as&nbsp;well.</p>
<p>With some of the new features in <a href="/2014/05/engineer-v0-5-0-released/">Engineer version 0.5.0</a>, I&#8217;ve got tylerbutler.com in a <a href="https://github.com/tylerbutler/tylerbutler.com">GitHub repository</a> of its own, and every time I <code>git push</code>, the site is updated automatically thanks to Azure. Even better, thanks to Engineer&#8217;s support for <a href="https://engineer.readthedocs.org/en/master/settings.html#engineer.conf.EngineerConfiguration.POST_DIR">multiple post directories</a>, I can put my published posts inside the Git repository itself for safekeeping but still write posts from any device/app that integrates with Dropbox. This flexibility of post authoring was one of the key reasons I wrote Engineer originally; it&#8217;s important that I maintain that with whatever deployment architecture I&nbsp;choose.</p>
<p>Once you have everything set up on Azure, the basic flow looks like&nbsp;this:</p>
<ul>
<li>Edit and maintain your site in a Git or Mercurial&nbsp;repository</li>
<li>Build your site, commit to&nbsp;Git/Mercurial</li>
<li>Push the repository to&nbsp;GitHub/Bitbucket </li>
<li>Azure site automatically updates itself in a few&nbsp;minutes</li>
</ul>
<p>In order to get this up and running, you can follow the steps below. Note that Engineer 0.5.0+ is needed. I&#8217;ll eventually get these instructions incorporated into the official Engineer docs, but I wanted to get the info out there for folks without&nbsp;delay.</p>
<h2>Getting&nbsp;started</h2>
<p>If you don&#8217;t yet have an Engineer site, you can initialize a new one with a content structure and configuration files especially for Azure using the following command (new in Engineer&nbsp;0.5.0):</p>
<div class="codehilite"><pre>engineer init -m azure
</pre></div>


<p>If you have an existing site, you can simply use it, of course, but you may need to add your own <code>.deployment</code> file or configure the Azure deployment settings for your site yourself. There are more details&nbsp;below.</p>
<p>You can lay out your files however you wish, but the typical layout will look something like&nbsp;this:</p>
<div class="codehilite"><pre>/my-engineer-site
  - .deployment
  - config.yaml
    /content
    /templates
    /output
        /azure
</pre></div>


<p>Run the following command from the root of the folder to build your site for&nbsp;Azure:</p>
<div class="codehilite"><pre>engineer build -s ./config.yaml
</pre></div>


<p>The output will be written to <code>./output/azure/</code> by default. You can obviously change this in the Engineer settings, though note that you&#8217;ll have to make some other changes as well. Keep reading for further&nbsp;details.</p>
<p>Go to your Azure portal and create a new web site. Configure the site to automatically deploy from a GitHub/Bitbucket repository and connect it to your repository. You can also choose to use manual Git deployment if you wish, or even just <span class="caps">FTP</span> the site content, but I recommend the GitHub auto-publish route; it&#8217;s much simpler and&nbsp;automatic.</p>
<p>Now every time you push a new commit to GitHub/Bitbucket, your Azure site will update automatically with the contents of the <code>./output/azure/</code> folder. This magic works because of the <code>.deployment</code> file in your repository, which is created automatically by Engineer when you initialize a new site using <code>engineer init -m azure</code>. You can read more about this file here: <a href="https://github.com/projectkudu/kudu/wiki/Customizing-deployments">https://github.com/projectkudu/kudu/wiki/Customizing-deployments</a></p>
<p>If you want to change the output folder to a different path, you can do that in your Engineer config file. However, in addition, you&#8217;ll need to tell Azure that the location of the site content within your repository is different. This is contained in &#8211; you guessed it &#8211; the <code>.deployment</code> file. Just change the value of the &#8216;project&#8217; setting within that&nbsp;file.</p>
<p>If you prefer, you can remove the <code>.deployment</code> file altogether and configure the site root in the Azure portal directly. This is basically the same as the <code>.deployment</code> file approach, but if you have a single repository that contains multiple Engineer sites &#8211; or other types of sites, even &#8211; then using the settings in the Azure portal is preferable. From <a href="http://www.hanselman.com/blog/DeployingTWOWebsitesToWindowsAzureFromOneGitRepository.aspx">Scott Hanselman</a>:</p>
<blockquote>
<p>What&#8217;s nice about setting the &#8220;Project&#8221; setting via site configuration rather than via a <code>.deployment</code> file is that you can now push the same git repository containing two different web sites to two remote Azure web sites. Each Azure website should have a different project setting and will end up deploying the two different&nbsp;sites.</p>
</blockquote>
<p>That is <em>very</em> cool. Scott has more details in <a href="http://www.hanselman.com/blog/DeployingTWOWebsitesToWindowsAzureFromOneGitRepository.aspx">his post on the topic</a>.</p>
<p>Hopefully this helps you get your Engineer site up and running on Azure. As I mentioned before, I am going to be incorporating this information into the official Engineer docs as well. I&#8217;ve also gotten Engineer sites running on GitHub Pages, so I&#8217;ll cover that in a future&nbsp;post.</p>
<!--
In particular, GitHub offers a service called [GitHub Pages](http://pages.github.com/) that integrates wonderfully with Jekyll. Of course, if you're using Engineer, you're not using Jekyll,
-->
                                                                                                                
                    <div class="row">
                        <div class="small-12 columns post-links">
                            <ul class="small-block-grid-2">
                                <li>
                                                                            <a href="/2014/05/engineer-v0-5-0-released/">← Engineer v0.5.0 Released</a>
                                                                    </li>
                                <li>
                                                                            <a href="/2014/05/markdown-lazy-links-in-python/">Markdown Lazy Links in Python →</a>
                                                                    </li>
                            </ul>
                        </div>
                    </div>
                                                    <section id="comments">
                                                    <header>
                                <h1>Comments</h1>
                            </header>
                                                    <div id="disqus_thread"></div>
    <!-- DISQUS -->
    <script type="text/javascript">
        var disqus_shortname = 'tylerbutlercom';
        var disqus_identifier = '/2014/05/deploying-engineer-sites-to-azure/';
        var disqus_url = 'http://www.tylerbutler.com/2014/05/deploying-engineer-sites-to-azure/';
        
        (function () {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments
        powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span
            class="logo-disqus">Disqus</span></a>
                    </section>
                            </article>
            </div></section>
            </div>
        <div class="row">                <footer class="small-12 small-centered columns">                        <p>&copy; 2002-2013 Tyler Butler. All rights reserved.</p>

<p>Powered by <a href="http://www.tylerbutler.com/projects/engineer">engineer</a>.</p>                    </footer>
            </div>
    </div>
            <script src="/static/bundled/foundation.55babb4f.js"></script>
        
</body>
</html>