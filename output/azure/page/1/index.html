<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>        Tyler Butler
</title>

    
    <link rel="alternate" type="application/atom+xml"
          title="Tyler Butler Atom Feed"
          href="http://feeds.feedburner.com/TylerButlerAllPosts"/>

                            <link rel="stylesheet" href="/static/bundled/dark_rainbow.b80c84c4.css" type="text/css"/>
                            
            <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script>
        if (window.jQuery == undefined) {
                            document.write('<script src="/static/bundled/jquery.8fc25e27.js"><\/script>');
                    }
    </script>

        <script type="text/javascript"
            src="http://use.typekit.net/vty2qol.js"></script>
    <script type="text/javascript">
        try {
            // noinspection JSUnresolvedVariable
            Typekit.load();
        }
        catch (e) {
        }
    </script>

    
    
            <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26061862-1']);
    _gaq.push(['_setDomainName', 'tylerbutler.com']);

    // track speed for all users; traffic is low enough this shouldn't be a problem
    _gaq.push(['_setSiteSpeedSampleRate', 100]);
    
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>    
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body class=""><!--[if lt IE 7]>
    <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->    <div class="container">            <header id="primary" class="row">                                            <h1 class="small-12 medium-5 columns">
                            <a href="/">                                    tyler
                                    <span class="highlight">butler</span>
                                </a>
                        </h1>
                                                        <nav class="small-12 medium-7 columns">                            <ul class="nav navbar-nav">
    
                <li class="current">
        <a href="/">articles</a></li>
                <li>
        <a href="/projects">projects</a></li>
</ul>

                        </nav>
                </header>
            <div class="row">                <section id="sidebar"
                         class="medium-4 medium-push-8 large-3 large-push-9 columns">                        <section>
    <div>
        <p class="hide-on-phones">I'm <a href="/about">Tyler Butler</a>: a big man with small dogs.</p>
        <hr class="hide-on-phones"/>
        <nav>
            <ul>
                <li><a href="http://feeds.feedburner.com/TylerButlerAllPosts">feed</a></li>
                <li><a href="/archives">archives</a></li>
                <li><a href="/colophon">colophon</a></li>
            </ul>
        </nav>
        <hr class="hide-on-phones"/>
        <h2 class="hide-on-phones">you might remember me from</h2>
        <ul class="hide-on-phones">
            <li><a href="http://twitter.com/tylerbutler">twitter</a></li>
            <li><a href="http://github.com/tylerbutler">github</a></li>
        </ul>
    </div>
</section>

    <section id="search">
        <div>
            <form action="http://google.com/search" method="get">
                <fieldset role="search">
                    <input type="hidden" name="q" value="site:http://www.tylerbutler.com">
                    <input class="search" type="text" name="q" results="0" placeholder="Search...">
                </fieldset>
            </form>
        </div>
    </section>
                    </section>
                            <section id="main"
                         class="medium-8 medium-pull-4 large-9 large-pull-3 columns"
                         role="main">    <div class="posts">
                                    <div class="row">
                    <div class="post-info medium-3 large-2 columns">
                <div class="post-date">
                                            <div class="month">OCT</div>
                        <div class="day">07</div>
                        <div class="year">2014</div>
                        <div class="permalink">
                            <a href="/2014/10/updated-python-installation-guide/"
                               title="Permanent link to 'Updated Python Installation Guide'">∞</a>
                        </div>
                                    </div>
                                                    <ul class="tags">
                                                    <li><a href="/tag/python">python</a>
                            </li>
                                                    <li><a href="/tag/powershell">powershell</a>
                            </li>
                                            </ul>
                            </div>
                                <article class="post-content medium-9 large-10 columns">
                <time datetime="2014-10-07 PDT"
                      pubdate=""></time>
                <header>
                    <h1>
                        <a href="        /2014/10/updated-python-installation-guide/">Updated Python Installation Guide</a>
                                            </h1>
                </header>
                                    <p>I just made a major update to my <a href="/2012/05/how-to-install-python-pip-and-virtualenv-on-windows-with-powershell/">Python Windows installation guide</a>, which remains my most popular post. Things have gotten a lot simpler over the past few months since the distribute fork of setuptools was integrated&nbsp;back.</p>
                                                            </article>
            </div>                                                <div class="row">
                    <div class="post-info medium-3 large-2 columns">
                <div class="post-date">
                                            <div class="month">OCT</div>
                        <div class="day">07</div>
                        <div class="year">2014</div>
                        <div class="permalink">
                            <a href="/2014/10/stack-traces/"
                               title="Permanent link to 'Stack Traces'">∞</a>
                        </div>
                                    </div>
                                    <div class="attribution">
                                                    via <a href="http://inessential.com/2014/08/27/a_rant_about_stack_traces">Brent Simmons</a>
                                            </div>
                                            </div>
                                <article class="post-content medium-9 large-10 columns">
                <time datetime="2014-10-07 PDT"
                      pubdate=""></time>
                <header>
                    <h1>
                        <a href="http://rustyshelf.org/2014/08/07/thoughts-on-swift-from-an-idiot/">Stack Traces</a>
                        <span class="arrow">→</span>                    </h1>
                </header>
                                    <blockquote>
<p>Yes I know, ha ha Null Pointer, Java, <span class="caps">LOL</span>. But that’s an exact line number friends. What did the user do? They tapped the subscribe button. Which page where they on? The Podcast Dialog. Zero ambiguity. Guess how many of our Android crashes we get that for? 100%. In iOS we’d be lucky if even 30% of our crashes had stack traces we can line up to actual things we can then reproduce. So most iOS crashes today involve me becoming House <span class="caps">MD</span> and poking the code for hours, only to figure out that like always, it’s never&nbsp;Lupus.</p>
</blockquote>
<p>It astounds me that iOS debugging is so&#8230; <em>medieval&#8230;</em> That said, JavaScript stack traces can be just as bad, depending on the browser. I think good stack traces are a <em>requirement</em> for actually shipping software. Here&#8217;s hoping iOS, and browsers, catch up&nbsp;soon.</p>
                                                            </article>
            </div>                                                <div class="row">
                    <div class="post-info medium-3 large-2 columns">
                <div class="post-date">
                                            <div class="month">AUG</div>
                        <div class="day">15</div>
                        <div class="year">2014</div>
                        <div class="permalink">
                            <a href="/2014/08/node-js-on-windows-8-1/"
                               title="Permanent link to 'Node.js On Windows 8.1'">∞</a>
                        </div>
                                    </div>
                                                    <ul class="tags">
                                                    <li><a href="/tag/node-js">node.js</a>
                            </li>
                                            </ul>
                            </div>
                                <article class="post-content medium-9 large-10 columns">
                <time datetime="2014-08-15 PDT"
                      pubdate=""></time>
                <header>
                    <h1>
                        <a href="        /2014/08/node-js-on-windows-8-1/">Node.js On Windows 8.1</a>
                                            </h1>
                </header>
                                    <p>This afternoon I installed Node.js version 0.10.30 (the most recent according to <a href="http://nodejs.org/">http://nodejs.org/</a>) on a new Windows box. Unfortunately, after installing, using <code>npm</code> was, uhhh, not&nbsp;good:</p>
<div class="codehilite"><pre><span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">tyler</span><span class="p">&gt;</span> <span class="n">npm</span>
<span class="n">Error</span><span class="err">:</span> <span class="n"><span class="caps">ENOENT</span></span><span class="p">,</span> <span class="n">stat</span> <span class="s1">&#39;C:\Users\tyler\AppData\Roaming\npm&#39;</span>
</pre></div>


<p>Not exactly a great experience. And that error message? Useless. To me, anyway. I&#8217;m sure <code>ENOENT</code> means something useful to someone.<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup></p>
<p>Fortunately, a quick search revealed <a href="https://stackoverflow.com/questions/25103499/cant-start-npm-on-windows-8-error-enoent-stat-c-users-user-appdata-roaming">this page on Stack Overflow</a>, where the &#8216;fix&#8217; is outlined: you just need to manually create the npm folder at the path in the error&nbsp;message:</p>
<div class="codehilite"><pre><span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">tylerbu</span><span class="p">&gt;</span> <span class="n">mkdir</span> <span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">tylerbu</span><span class="p">\</span><span class="n">AppData</span><span class="p">\</span><span class="n">Roaming</span><span class="p">\</span><span class="n">npm</span>


<span class="n">Directory</span><span class="err">:</span> <span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">tylerbu</span><span class="p">\</span><span class="n">AppData</span><span class="p">\</span><span class="n">Roaming</span>


<span class="n">Mode</span>                <span class="n">LastWriteTime</span>       <span class="n">Length</span>      <span class="n">Name</span>
<span class="p">----</span>                <span class="p">-------------</span>       <span class="p">------</span>      <span class="p">----</span>
<span class="n">d</span><span class="p">----</span>               <span class="n">8</span><span class="p">/</span><span class="n">15</span><span class="p">/</span><span class="n">2014</span>           <span class="n">1</span><span class="err">:</span><span class="n">25</span> <span class="n"><span class="caps">PM</span></span>     <span class="n">npm</span>
</pre></div>


<p>After that, things were&nbsp;golden:</p>
<div class="codehilite"><pre><span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">tylerbu</span><span class="p">&gt;</span> <span class="n">npm</span> <span class="n">install</span> <span class="n">grunt</span>
<span class="n">grunt</span><span class="nv">@0</span><span class="p">.</span><span class="n">4</span><span class="p">.</span><span class="n">5</span> <span class="n">node_modules</span><span class="p">\</span><span class="n">grunt</span>
<span class="err">├──</span> <span class="n">dateformat</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">2</span><span class="p">-</span><span class="n">1</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">3</span>
<span class="err">├──</span> <span class="n">which</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">5</span>
<span class="err">├──</span> <span class="n">eventemitter2</span><span class="nv">@0</span><span class="p">.</span><span class="n">4</span><span class="p">.</span><span class="n">14</span>
<span class="err">├──</span> <span class="n">getobject</span><span class="nv">@0</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">0</span>
<span class="err">├──</span> <span class="n">colors</span><span class="nv">@0</span><span class="p">.</span><span class="n">6</span><span class="p">.</span><span class="n">2</span>
<span class="err">├──</span> <span class="n">rimraf</span><span class="nv">@2</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">8</span>
<span class="err">├──</span> <span class="n">async</span><span class="nv">@0</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">22</span>
<span class="err">├──</span> <span class="n">hooker</span><span class="nv">@0</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">3</span>
<span class="err">├──</span> <span class="n">grunt-legacy-util</span><span class="nv">@0</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">0</span>
<span class="err">├──</span> <span class="n">exit</span><span class="nv">@0</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">2</span>
<span class="err">├──</span> <span class="n">lodash</span><span class="nv">@0</span><span class="p">.</span><span class="n">9</span><span class="p">.</span><span class="n">2</span>
<span class="err">├──</span> <span class="n">nopt</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">10</span> <span class="p">(</span><span class="n">abbrev</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">5</span><span class="p">)</span>
<span class="err">├──</span> <span class="n">coffee-script</span><span class="nv">@1</span><span class="p">.</span><span class="n">3</span><span class="p">.</span><span class="n">3</span>
<span class="err">├──</span> <span class="n">iconv-lite</span><span class="nv">@0</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">11</span>
<span class="err">├──</span> <span class="n">underscore</span><span class="p">.</span><span class="n">string</span><span class="nv">@2</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">1</span>
<span class="err">├──</span> <span class="n">minimatch</span><span class="nv">@0</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">14</span> <span class="p">(</span><span class="n">sigmund</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">,</span> <span class="n">lru-cache</span><span class="nv">@2</span><span class="p">.</span><span class="n">5</span><span class="p">.</span><span class="n">0</span><span class="p">)</span>
<span class="err">├──</span> <span class="n">glob</span><span class="nv">@3</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">21</span> <span class="p">(</span><span class="n">inherits</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">,</span> <span class="n">graceful-fs</span><span class="nv">@1</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">3</span><span class="p">)</span>
<span class="err">├──</span> <span class="n">findup-sync</span><span class="nv">@0</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">3</span> <span class="p">(</span><span class="n">lodash</span><span class="nv">@2</span><span class="p">.</span><span class="n">4</span><span class="p">.</span><span class="n">1</span><span class="p">,</span> <span class="n">glob</span><span class="nv">@3</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">11</span><span class="p">)</span>
<span class="err">├──</span> <span class="n">grunt-legacy-log</span><span class="nv">@0</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">1</span> <span class="p">(</span><span class="n">underscore</span><span class="p">.</span><span class="n">string</span><span class="nv">@2</span><span class="p">.</span><span class="n">3</span><span class="p">.</span><span class="n">3</span><span class="p">,</span> <span class="n">lodash</span><span class="nv">@2</span><span class="p">.</span><span class="n">4</span><span class="p">.</span><span class="n">1</span><span class="p">)</span>
<span class="err">└──</span> <span class="n">js-yaml</span><span class="nv">@2</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">5</span> <span class="p">(</span><span class="n">esprima</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">4</span><span class="p">,</span> <span class="n">argparse</span><span class="nv">@0</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">15</span><span class="p">)</span>
</pre></div>


<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>On the plus side, the <code>ENOENT</code> string <em>did</em> help me find help on the web more quickly. So, maybe not so bad after all?&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                                                            </article>
            </div>                                                <div class="row">
                    <div class="post-info medium-3 large-2 columns">
                <div class="post-date">
                                            <div class="month">JUL</div>
                        <div class="day">08</div>
                        <div class="year">2014</div>
                        <div class="permalink">
                            <a href="/2014/07/day-one-free-on-the-app-store/"
                               title="Permanent link to 'Day One Free on the App Store'">∞</a>
                        </div>
                                    </div>
                                                    <ul class="tags">
                                                    <li><a href="/tag/apps">apps</a>
                            </li>
                                            </ul>
                            </div>
                                <article class="post-content medium-9 large-10 columns">
                <time datetime="2014-07-08 PDT"
                      pubdate=""></time>
                <header>
                    <h1>
                        <a href="        /2014/07/day-one-free-on-the-app-store/">Day One Free on the App Store</a>
                                            </h1>
                </header>
                                    <p>I&#8217;ve been using <a href="http://dayoneapp.com/">Day One</a> for the past few months to encourage my own journaling, and while I&#8217;ve not been as consistent as I&#8217;d hoped, the app is pretty good. Dropbox syncing seems to work pretty well too. It&#8217;s free this week <a href="https://itunes.apple.com/us/app/day-one-journal-diary/id421706526?mt=8&amp;uo=4&amp;11l9Ct">on the App Store</a>.</p>
<p>If you pick it up, you might also check out <a href="http://brettterpstra.com/projects/slogger/">Slogger</a>.</p>
                                                            </article>
            </div>                                                <div class="row">
                    <div class="post-info medium-3 large-2 columns">
                <div class="post-date">
                                            <div class="month">MAY</div>
                        <div class="day">28</div>
                        <div class="year">2014</div>
                        <div class="permalink">
                            <a href="/2014/05/markdown-lazy-links-in-python/"
                               title="Permanent link to 'Markdown Lazy Links in Python'">∞</a>
                        </div>
                                    </div>
                                                    <ul class="tags">
                                                    <li><a href="/tag/engineer">engineer</a>
                            </li>
                                                    <li><a href="/tag/python">python</a>
                            </li>
                                                    <li><a href="/tag/markdown">markdown</a>
                            </li>
                                            </ul>
                            </div>
                                <article class="post-content medium-9 large-10 columns">
                <time datetime="2014-05-28 PDT"
                      pubdate=""></time>
                <header>
                    <h1>
                        <a href="        /2014/05/markdown-lazy-links-in-python/">Markdown Lazy Links in Python</a>
                                            </h1>
                </header>
                                    <p>One of the things I am most excited about in <a href="/2014/05/engineer-v0-5-0-released/">Engineer 0.5.0</a> is the new support for <a href="https://engineer.readthedocs.org/en/master/bundled_plugins.html#lazy-links-plugin">Markdown Lazy Links</a>. My implementation is actually a bit richer than <a href="http://brettterpstra.com/2013/10/19/lazy-markdown-reference-links/">Brett Terpstra&#8217;s original sample</a>, though it&#8217;s not quite as elegant as the original either. In particular, Engineer&#8217;s implementation allows you to add lazy links to posts that already have numeric reference links. Also, you can optionally have Engineer transform the lazy links into numeric links during a build. This can come in handy if you anticipate doing a lot of reorganizing of the post content at some point, and want to make sure links don&#8217;t&nbsp;break.</p>
<p>It took some time to unpack Brett&#8217;s elegant regular expression into the Python form, mostly because Ruby is very foreign to me, and its regex engine has some default behaviors that differ from Python&#8217;s. In particular, it took some time to figure out exactly what flags to pass in so that things behaved appropriately. I&#8217;m still not sure I got it completely right, though my unit tests seem to pass and I&#8217;ve been using the plugin for some time so I think it&#8217;s&nbsp;stable. </p>
<p>I chose to use the <a href="https://docs.python.org/2/library/re.html#re.VERBOSE"><span class="caps">VERBOSE</span></a> regular expression form so it&#8217;s clearer how the expression works. Hopefully that will save someone some time if they&#8217;re looking to port the thing to some other regular expression language. You can find the source in the <a href="https://github.com/tylerbutler/engineer/blob/dev/engineer/plugins/bundled.py#L306">GitHub repository</a>, but I&#8217;m pasting the relevant class below as well. Note that this is an <a href="https://engineer.readthedocs.org/en/master/dev/plugins.html#post-processor-plugins">Engineer PostProcessor plugin</a>, so some of the code is simply scaffolding for the plugin system. If you find a bug, please let me know, or even better, <a href="https://github.com/tylerbutler/engineer/issues">file an issue on GitHub</a>.</p>
<div class="codehilite"><pre><span class="k">class</span> <span class="nc">LazyMarkdownLinksPlugin</span><span class="p">(</span><span class="n">PostProcessor</span><span class="p">):</span>
<span class="c"># Inspired by Brett Terpstra: http://brettterpstra.com/2013/10/19/lazy-markdown-reference-links/</span>
<span class="n">_link_regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&#39;&#39;&#39;</span>
<span class="s">    (           # Start group 1, which is the actual link text</span>
<span class="s">        \[          # Match a literal [</span>
<span class="s">        [^\]]+      # Match anything except a literal ] - this will be the link text itself</span>
<span class="s">        \]          # Match a literal ]</span>
<span class="s">        \s*         # Any whitespace (including newlines)</span>
<span class="s">        \[          # Match the opening bracket of the lazy link marker</span>
<span class="s">    )           # End group 1</span>
<span class="s">    \*          # Literal * - this is the lazy link marker</span>
<span class="s">    (           # Start group 2, which is everything after the lazy link marker</span>
<span class="s">        \]          # Literal ]</span>
<span class="s">        .*?^        # Non-greedy match of anything up to a new line</span>
<span class="s">        \[          # Literal [</span>
<span class="s">    )           # End Group 2</span>
<span class="s">    \*\]:       # Match a literal *]: - the lazy link <span class="caps">URL</span> definition follows this</span>
<span class="s">    &#39;&#39;&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n"><span class="caps">MULTILINE</span></span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n"><span class="caps">DOTALL</span></span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n"><span class="caps">UNICODE</span></span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n"><span class="caps">VERBOSE</span></span><span class="p">)</span>

<span class="n">_counter_regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&#39;\[(\d+)\]:&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n"><span class="caps">UNICODE</span></span><span class="p">)</span>
<span class="n">_counter</span> <span class="o">=</span> <span class="mi">0</span>

<span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">_replace</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">match</span><span class="p">):</span>
    <span class="n">cls</span><span class="o">.</span><span class="n">_counter</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">sub_str</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s%s%s%s</span><span class="s">]:&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">cls</span><span class="o">.</span><span class="n">_counter</span><span class="p">,</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">cls</span><span class="o">.</span><span class="n">_counter</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sub_str</span>

<span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_max_link_number</span><span class="p">(</span><span class="n">post</span><span class="p">):</span>
    <span class="n">all_values</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">LazyMarkdownLinksPlugin</span><span class="o">.</span><span class="n">_counter_regex</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">post</span><span class="p">)])</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">all_values</span><span class="p">)</span> <span class="k">if</span> <span class="n">all_values</span> <span class="k">else</span> <span class="mi">0</span>

<span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">preprocess</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">post</span><span class="p">,</span> <span class="n">metadata</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">engineer.conf</span> <span class="kn">import</span> <span class="n">settings</span>

    <span class="n">logger</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="n">content_preprocessed</span>
    <span class="n">cls</span><span class="o">.</span><span class="n">_counter</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">get_max_link_number</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

    <span class="c"># This while loop ensures we handle overlapping matches</span>
    <span class="k">while</span> <span class="n">cls</span><span class="o">.</span><span class="n">_link_regex</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">content</span><span class="p">):</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_link_regex</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_replace</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
    <span class="n">post</span><span class="o">.</span><span class="n">content_preprocessed</span> <span class="o">=</span> <span class="n">content</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s">&#39;LAZY_LINKS_PERSIST&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">post</span><span class="o">.</span><span class="n">set_finalized_content</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">cls</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;Failed to persist lazy links.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">post</span><span class="p">,</span> <span class="n">metadata</span>
</pre></div>
                                                            </article>
            </div>                        </div>
    <div class="row archives">
        <div class="small-12 columns post-links">
            <ul class="small-block-grid-3">
                <li>
                                            <a href="/page/2">← older posts</a>
                                    </li>
                <li style="text-align: center;">
                    <a href="/archives"> &ndash; archives &ndash; </a>
                </li>
                <li>
                                            &nbsp;
                                    </li>
            </ul>
        </div>
    </div>
</section>
            </div>
        <div class="row">                <footer class="small-12 small-centered columns">                        <p>&copy; 2002-2013 Tyler Butler. All rights reserved.</p>

<p>Powered by <a href="http://www.tylerbutler.com/projects/engineer">engineer</a>.</p>                    </footer>
            </div>
    </div>
            <script src="/static/bundled/foundation.55babb4f.js"></script>
        
</body>
</html>