<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

            <!-- Facebook meta tags -->
        <meta property="og:site_name" content="Tyler Butler" />
            
    <title>        Tyler Butler
</title>

    
    <link rel="alternate" type="application/atom+xml"
          title="Tyler Butler Atom Feed"
          href="http://feeds.feedburner.com/TylerButlerAllPosts"/>

                            <link rel="stylesheet" href="/static/bundled/dark_rainbow.a7b5e1bc.css" type="text/css"/>
                            
            <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
    <!--suppress JSUnresolvedLibraryURL -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script>
        if (window.jQuery == undefined) {
                            document.write('<script src="/static/bundled/jquery.8fc25e27.js"><\/script>');
                    }
    </script>

        <!--suppress JSUnresolvedLibraryURL -->
    <script type="text/javascript"
            src="//use.typekit.net/vty2qol.js"></script>
    <script type="text/javascript">
        try {
            // noinspection JSUnresolvedVariable
            Typekit.load();
        }
        catch (e) {
        }
    </script>

    
    
            <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26061862-1']);
    _gaq.push(['_setDomainName', 'tylerbutler.com']);

    // track speed for all users; traffic is low enough this shouldn't be a problem
    _gaq.push(['_setSiteSpeedSampleRate', 100]);
    
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>    
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body class=""><!--[if lt IE 7]>
    <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->                        <div id="fb-root"></div>
            <script>(function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) {
                    return;
                }
                js = d.createElement(s);
                js.id = id;
                js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=298536070167430&version=v2.0";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));</script>
                <div class="container">            <header id="primary" class="row">                                            <h1 class="small-12 medium-5 columns">
                            <a href="/">                                    tyler
                                    <span class="highlight">butler</span>
                                </a>
                        </h1>
                                                        <nav class="small-12 medium-7 columns">                            <ul class="nav navbar-nav">
    
                <li class="current">
        <a href="/">articles</a></li>
                <li>
        <a href="/projects">projects</a></li>
</ul>

                        </nav>
                </header>
            <div class="row">                <section id="sidebar"
                         class="medium-4 medium-push-8 large-3 large-push-9 columns">                        <section>
    <div>
        <p class="hide-on-phones">I'm <a href="/about">Tyler Butler</a>: a big man with small dogs.</p>
        <hr class="hide-on-phones"/>
        <nav>
            <ul>
                <li><a href="http://feeds.feedburner.com/TylerButlerAllPosts">feed</a></li>
                <li><a href="/archives">archives</a></li>
                <li><a href="/colophon">colophon</a></li>
            </ul>
        </nav>
        <hr class="hide-on-phones"/>
        <h2 class="hide-on-phones">you might remember me from</h2>
        <ul class="hide-on-phones">
            <li><a href="http://twitter.com/tylerbutler">twitter</a></li>
            <li><a href="http://github.com/tylerbutler">github</a></li>
        </ul>
    </div>
</section>

    <section id="search">
        <div>
            <form action="http://google.com/search" method="get">
                <fieldset role="search">
                    <input type="hidden" name="q" value="site:http://www.tylerbutler.com">
                    <input class="search" type="text" name="q" results="0" placeholder="Search...">
                </fieldset>
            </form>
        </div>
    </section>
                    </section>
                            <section id="main"
                         class="medium-8 medium-pull-4 large-9 large-pull-3 columns"
                         role="main">    <div class="posts">
                                    <div class="row">
            <div class="post-info medium-3 large-2 columns">
            <div class="post-date">
                                    <div class="month">AUG</div>
                    <div class="day">15</div>
                    <div class="year">2014</div>
                    <div class="permalink">
                        <a href="/2014/08/node-js-on-windows-8-1/"
                           title="Permanent link to 'Node.js On Windows 8.1'">∞</a>
                    </div>
                            </div>
                                        <ul class="tags">
                                            <li><a href="/tag/node-js">node.js</a>
                        </li>
                                    </ul>
                                </div>
    
                        <article class="post-content medium-9 large-10 columns">
                <time datetime="2014-08-15 PDT"
                      pubdate=""></time>
                <header>
                    <h1>
                        <a href="        /2014/08/node-js-on-windows-8-1/">Node.js On Windows 8.1</a>
                                            </h1>
                </header>
                                    <p>This afternoon I installed Node.js version 0.10.30 (the most recent according to <a href="http://nodejs.org/">http://nodejs.org/</a>) on a new Windows box. Unfortunately, after installing, using <code>npm</code> was, uhhh, not&nbsp;good:</p>
<div class="codehilite"><pre><span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">tyler</span><span class="p">&gt;</span> <span class="n">npm</span>
<span class="n">Error</span><span class="err">:</span> <span class="n"><span class="caps">ENOENT</span></span><span class="p">,</span> <span class="n">stat</span> <span class="s1">&#39;C:\Users\tyler\AppData\Roaming\npm&#39;</span>
</pre></div>


<p>Not exactly a great experience. And that error message? Useless. To me, anyway. I&#8217;m sure <code>ENOENT</code> means something useful to someone.<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup></p>
<p>Fortunately, a quick search revealed <a href="https://stackoverflow.com/questions/25103499/cant-start-npm-on-windows-8-error-enoent-stat-c-users-user-appdata-roaming">this page on Stack Overflow</a>, where the &#8216;fix&#8217; is outlined: you just need to manually create the npm folder at the path in the error&nbsp;message:</p>
<div class="codehilite"><pre><span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">tylerbu</span><span class="p">&gt;</span> <span class="n">mkdir</span> <span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">tylerbu</span><span class="p">\</span><span class="n">AppData</span><span class="p">\</span><span class="n">Roaming</span><span class="p">\</span><span class="n">npm</span>


<span class="n">Directory</span><span class="err">:</span> <span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">tylerbu</span><span class="p">\</span><span class="n">AppData</span><span class="p">\</span><span class="n">Roaming</span>


<span class="n">Mode</span>                <span class="n">LastWriteTime</span>       <span class="n">Length</span>      <span class="n">Name</span>
<span class="p">----</span>                <span class="p">-------------</span>       <span class="p">------</span>      <span class="p">----</span>
<span class="n">d</span><span class="p">----</span>               <span class="n">8</span><span class="p">/</span><span class="n">15</span><span class="p">/</span><span class="n">2014</span>           <span class="n">1</span><span class="err">:</span><span class="n">25</span> <span class="n"><span class="caps">PM</span></span>     <span class="n">npm</span>
</pre></div>


<p>After that, things were&nbsp;golden:</p>
<div class="codehilite"><pre><span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">tylerbu</span><span class="p">&gt;</span> <span class="n">npm</span> <span class="n">install</span> <span class="n">grunt</span>
<span class="n">grunt</span><span class="nv">@0</span><span class="p">.</span><span class="n">4</span><span class="p">.</span><span class="n">5</span> <span class="n">node_modules</span><span class="p">\</span><span class="n">grunt</span>
<span class="err">├──</span> <span class="n">dateformat</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">2</span><span class="p">-</span><span class="n">1</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">3</span>
<span class="err">├──</span> <span class="n">which</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">5</span>
<span class="err">├──</span> <span class="n">eventemitter2</span><span class="nv">@0</span><span class="p">.</span><span class="n">4</span><span class="p">.</span><span class="n">14</span>
<span class="err">├──</span> <span class="n">getobject</span><span class="nv">@0</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">0</span>
<span class="err">├──</span> <span class="n">colors</span><span class="nv">@0</span><span class="p">.</span><span class="n">6</span><span class="p">.</span><span class="n">2</span>
<span class="err">├──</span> <span class="n">rimraf</span><span class="nv">@2</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">8</span>
<span class="err">├──</span> <span class="n">async</span><span class="nv">@0</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">22</span>
<span class="err">├──</span> <span class="n">hooker</span><span class="nv">@0</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">3</span>
<span class="err">├──</span> <span class="n">grunt-legacy-util</span><span class="nv">@0</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">0</span>
<span class="err">├──</span> <span class="n">exit</span><span class="nv">@0</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">2</span>
<span class="err">├──</span> <span class="n">lodash</span><span class="nv">@0</span><span class="p">.</span><span class="n">9</span><span class="p">.</span><span class="n">2</span>
<span class="err">├──</span> <span class="n">nopt</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">10</span> <span class="p">(</span><span class="n">abbrev</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">5</span><span class="p">)</span>
<span class="err">├──</span> <span class="n">coffee-script</span><span class="nv">@1</span><span class="p">.</span><span class="n">3</span><span class="p">.</span><span class="n">3</span>
<span class="err">├──</span> <span class="n">iconv-lite</span><span class="nv">@0</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">11</span>
<span class="err">├──</span> <span class="n">underscore</span><span class="p">.</span><span class="n">string</span><span class="nv">@2</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">1</span>
<span class="err">├──</span> <span class="n">minimatch</span><span class="nv">@0</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">14</span> <span class="p">(</span><span class="n">sigmund</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">,</span> <span class="n">lru-cache</span><span class="nv">@2</span><span class="p">.</span><span class="n">5</span><span class="p">.</span><span class="n">0</span><span class="p">)</span>
<span class="err">├──</span> <span class="n">glob</span><span class="nv">@3</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">21</span> <span class="p">(</span><span class="n">inherits</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">,</span> <span class="n">graceful-fs</span><span class="nv">@1</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">3</span><span class="p">)</span>
<span class="err">├──</span> <span class="n">findup-sync</span><span class="nv">@0</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">3</span> <span class="p">(</span><span class="n">lodash</span><span class="nv">@2</span><span class="p">.</span><span class="n">4</span><span class="p">.</span><span class="n">1</span><span class="p">,</span> <span class="n">glob</span><span class="nv">@3</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">11</span><span class="p">)</span>
<span class="err">├──</span> <span class="n">grunt-legacy-log</span><span class="nv">@0</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">1</span> <span class="p">(</span><span class="n">underscore</span><span class="p">.</span><span class="n">string</span><span class="nv">@2</span><span class="p">.</span><span class="n">3</span><span class="p">.</span><span class="n">3</span><span class="p">,</span> <span class="n">lodash</span><span class="nv">@2</span><span class="p">.</span><span class="n">4</span><span class="p">.</span><span class="n">1</span><span class="p">)</span>
<span class="err">└──</span> <span class="n">js-yaml</span><span class="nv">@2</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">5</span> <span class="p">(</span><span class="n">esprima</span><span class="nv">@1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">4</span><span class="p">,</span> <span class="n">argparse</span><span class="nv">@0</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">15</span><span class="p">)</span>
</pre></div>


<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>On the plus side, the <code>ENOENT</code> string <em>did</em> help me find help on the web more quickly. So, maybe not so bad after all?&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                                                            </article>
            </div>                                                <div class="row">
            <div class="post-info medium-3 large-2 columns">
            <div class="post-date">
                                    <div class="month">JUL</div>
                    <div class="day">08</div>
                    <div class="year">2014</div>
                    <div class="permalink">
                        <a href="/2014/07/day-one-free-on-the-app-store/"
                           title="Permanent link to 'Day One Free on the App Store'">∞</a>
                    </div>
                            </div>
                                        <ul class="tags">
                                            <li><a href="/tag/apps">apps</a>
                        </li>
                                    </ul>
                                </div>
    
                        <article class="post-content medium-9 large-10 columns">
                <time datetime="2014-07-08 PDT"
                      pubdate=""></time>
                <header>
                    <h1>
                        <a href="        /2014/07/day-one-free-on-the-app-store/">Day One Free on the App Store</a>
                                            </h1>
                </header>
                                    <p>I&#8217;ve been using <a href="http://dayoneapp.com/">Day One</a> for the past few months to encourage my own journaling, and while I&#8217;ve not been as consistent as I&#8217;d hoped, the app is pretty good. Dropbox syncing seems to work pretty well too. It&#8217;s free this week <a href="https://itunes.apple.com/us/app/day-one-journal-diary/id421706526?mt=8&amp;uo=4&amp;11l9Ct">on the App Store</a>.</p>
<p>If you pick it up, you might also check out <a href="http://brettterpstra.com/projects/slogger/">Slogger</a>.</p>
                                                            </article>
            </div>                                                <div class="row">
            <div class="post-info medium-3 large-2 columns">
            <div class="post-date">
                                    <div class="month">MAY</div>
                    <div class="day">28</div>
                    <div class="year">2014</div>
                    <div class="permalink">
                        <a href="/2014/05/markdown-lazy-links-in-python/"
                           title="Permanent link to 'Markdown Lazy Links in Python'">∞</a>
                    </div>
                            </div>
                                        <ul class="tags">
                                            <li><a href="/tag/engineer">engineer</a>
                        </li>
                                            <li><a href="/tag/python">python</a>
                        </li>
                                            <li><a href="/tag/markdown">markdown</a>
                        </li>
                                    </ul>
                                </div>
    
                        <article class="post-content medium-9 large-10 columns">
                <time datetime="2014-05-28 PDT"
                      pubdate=""></time>
                <header>
                    <h1>
                        <a href="        /2014/05/markdown-lazy-links-in-python/">Markdown Lazy Links in Python</a>
                                            </h1>
                </header>
                                    <p>One of the things I am most excited about in <a href="/2014/05/engineer-v0-5-0-released/">Engineer 0.5.0</a> is the new support for <a href="https://engineer.readthedocs.org/en/master/bundled_plugins.html#lazy-links-plugin">Markdown Lazy Links</a>. My implementation is actually a bit richer than <a href="http://brettterpstra.com/2013/10/19/lazy-markdown-reference-links/">Brett Terpstra&#8217;s original sample</a>, though it&#8217;s not quite as elegant as the original either. In particular, Engineer&#8217;s implementation allows you to add lazy links to posts that already have numeric reference links. Also, you can optionally have Engineer transform the lazy links into numeric links during a build. This can come in handy if you anticipate doing a lot of reorganizing of the post content at some point, and want to make sure links don&#8217;t&nbsp;break.</p>
<p>It took some time to unpack Brett&#8217;s elegant regular expression into the Python form, mostly because Ruby is very foreign to me, and its regex engine has some default behaviors that differ from Python&#8217;s. In particular, it took some time to figure out exactly what flags to pass in so that things behaved appropriately. I&#8217;m still not sure I got it completely right, though my unit tests seem to pass and I&#8217;ve been using the plugin for some time so I think it&#8217;s&nbsp;stable. </p>
<p>I chose to use the <a href="https://docs.python.org/2/library/re.html#re.VERBOSE"><span class="caps">VERBOSE</span></a> regular expression form so it&#8217;s clearer how the expression works. Hopefully that will save someone some time if they&#8217;re looking to port the thing to some other regular expression language. You can find the source in the <a href="https://github.com/tylerbutler/engineer/blob/dev/engineer/plugins/bundled.py#L306">GitHub repository</a>, but I&#8217;m pasting the relevant class below as well. Note that this is an <a href="https://engineer.readthedocs.org/en/master/dev/plugins.html#post-processor-plugins">Engineer PostProcessor plugin</a>, so some of the code is simply scaffolding for the plugin system. If you find a bug, please let me know, or even better, <a href="https://github.com/tylerbutler/engineer/issues">file an issue on GitHub</a>.</p>
<div class="codehilite"><pre><span class="k">class</span> <span class="nc">LazyMarkdownLinksPlugin</span><span class="p">(</span><span class="n">PostProcessor</span><span class="p">):</span>
    <span class="c"># Inspired by Brett Terpstra: http://brettterpstra.com/2013/10/19/lazy-markdown-reference-links/</span>
    <span class="n">_link_regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&#39;&#39;&#39;</span>
<span class="s">        (           # Start group 1, which is the actual link text</span>
<span class="s">            \[          # Match a literal [</span>
<span class="s">            [^\]]+      # Match anything except a literal ] - this will be the link text itself</span>
<span class="s">            \]          # Match a literal ]</span>
<span class="s">            \s*         # Any whitespace (including newlines)</span>
<span class="s">            \[          # Match the opening bracket of the lazy link marker</span>
<span class="s">        )           # End group 1</span>
<span class="s">        \*          # Literal * - this is the lazy link marker</span>
<span class="s">        (           # Start group 2, which is everything after the lazy link marker</span>
<span class="s">            \]          # Literal ]</span>
<span class="s">            .*?^        # Non-greedy match of anything up to a new line</span>
<span class="s">            \[          # Literal [</span>
<span class="s">        )           # End Group 2</span>
<span class="s">        \*\]:       # Match a literal *]: - the lazy link <span class="caps">URL</span> definition follows this</span>
<span class="s">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n"><span class="caps">MULTILINE</span></span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n"><span class="caps">DOTALL</span></span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n"><span class="caps">UNICODE</span></span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n"><span class="caps">VERBOSE</span></span><span class="p">)</span>

    <span class="n">_counter_regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&#39;\[(\d+)\]:&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n"><span class="caps">UNICODE</span></span><span class="p">)</span>
    <span class="n">_counter</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_replace</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">match</span><span class="p">):</span>
        <span class="n">cls</span><span class="o">.</span><span class="n">_counter</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">sub_str</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s%s%s%s</span><span class="s">]:&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">cls</span><span class="o">.</span><span class="n">_counter</span><span class="p">,</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">cls</span><span class="o">.</span><span class="n">_counter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sub_str</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_max_link_number</span><span class="p">(</span><span class="n">post</span><span class="p">):</span>
        <span class="n">all_values</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">LazyMarkdownLinksPlugin</span><span class="o">.</span><span class="n">_counter_regex</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">post</span><span class="p">)])</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">all_values</span><span class="p">)</span> <span class="k">if</span> <span class="n">all_values</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">preprocess</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">post</span><span class="p">,</span> <span class="n">metadata</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">engineer.conf</span> <span class="kn">import</span> <span class="n">settings</span>

        <span class="n">logger</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="n">content_preprocessed</span>
        <span class="n">cls</span><span class="o">.</span><span class="n">_counter</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">get_max_link_number</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

        <span class="c"># This while loop ensures we handle overlapping matches</span>
        <span class="k">while</span> <span class="n">cls</span><span class="o">.</span><span class="n">_link_regex</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">content</span><span class="p">):</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_link_regex</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_replace</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
        <span class="n">post</span><span class="o">.</span><span class="n">content_preprocessed</span> <span class="o">=</span> <span class="n">content</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s">&#39;LAZY_LINKS_PERSIST&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">post</span><span class="o">.</span><span class="n">set_finalized_content</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">cls</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;Failed to persist lazy links.&quot;</span><span class="p">)</span>
<span class="k">return</span> <span class="n">post</span><span class="p">,</span> <span class="n">metadata</span>
</pre></div>
                                                            </article>
            </div>                                                <div class="row">
            <div class="post-info medium-3 large-2 columns">
            <div class="post-date">
                                    <div class="month">MAY</div>
                    <div class="day">06</div>
                    <div class="year">2014</div>
                    <div class="permalink">
                        <a href="/2014/05/deploying-engineer-sites-to-azure/"
                           title="Permanent link to 'Deploying Engineer Sites to Azure'">∞</a>
                    </div>
                            </div>
                                        <ul class="tags">
                                            <li><a href="/tag/engineer">engineer</a>
                        </li>
                                            <li><a href="/tag/azure">azure</a>
                        </li>
                                    </ul>
                                </div>
    
                        <article class="post-content medium-9 large-10 columns">
                <time datetime="2014-05-06 PDT"
                      pubdate=""></time>
                <header>
                    <h1>
                        <a href="        /2014/05/deploying-engineer-sites-to-azure/">Deploying Engineer Sites to Azure</a>
                                            </h1>
                </header>
                                    <p>A <a href="https://github.com/tylerbutler/engineer/issues/51">longstanding issue</a> in the Engineer issue tracker concerns documenting some of the free/low-cost hosting options one has to host an Engineer site. <a href="http://pages.github.com/">GitHub Pages</a> is a common request, and documenting that process is definitely on my to-do list, but I think there&#8217;s a better option:&nbsp;Azure.</p>
<p>I&#8217;ve been hosting tylerbutler.com on Azure for the past few months, and I have to say, I&#8217;m very pleased with it so far. It&#8217;s probably not the most cost-effective thing for my site, but if you have an <span class="caps">MSDN</span> subscription, which many .Net developers have (including me), then you have a monthly Azure credit that is almost certainly enough to cover the cost of deploying your Engineer site to&nbsp;Azure.</p>
<p>Deploying on Azure has the benefits of auto-scaling to handle traffic demands, though that&#8217;s not particularly compelling for Engineer-based sites since static sites by nature tend to be very scalable anyway. The truly compelling feature, in my opinion, is that it lets you maintain your built Engineer site in a Git or Mercurial repository, which is something that developers in particular really like. It is, after all, one of the nice things about GitHub pages as&nbsp;well.</p>
<p>With some of the new features in <a href="/2014/05/engineer-v0-5-0-released/">Engineer version 0.5.0</a>, I&#8217;ve got tylerbutler.com in a <a href="https://github.com/tylerbutler/tylerbutler.com">GitHub repository</a> of its own, and every time I <code>git push</code>, the site is updated automatically thanks to Azure. Even better, thanks to Engineer&#8217;s support for <a href="https://engineer.readthedocs.org/en/master/settings.html#engineer.conf.EngineerConfiguration.POST_DIR">multiple post directories</a>, I can put my published posts inside the Git repository itself for safekeeping but still write posts from any device/app that integrates with Dropbox. This flexibility of post authoring was one of the key reasons I wrote Engineer originally; it&#8217;s important that I maintain that with whatever deployment architecture I&nbsp;choose.</p>
<p>Once you have everything set up on Azure, the basic flow looks like&nbsp;this:</p>
<ul>
<li>Edit and maintain your site in a Git or Mercurial&nbsp;repository</li>
<li>Build your site, commit to&nbsp;Git/Mercurial</li>
<li>Push the repository to&nbsp;GitHub/Bitbucket </li>
<li>Azure site automatically updates itself in a few&nbsp;minutes</li>
</ul>
<p>In order to get this up and running, you can follow the steps below. Note that Engineer 0.5.0+ is needed. I&#8217;ll eventually get these instructions incorporated into the official Engineer docs, but I wanted to get the info out there for folks without&nbsp;delay.</p>
<h2>Getting&nbsp;started</h2>
<p>If you don&#8217;t yet have an Engineer site, you can initialize a new one with a content structure and configuration files especially for Azure using the following command (new in Engineer&nbsp;0.5.0):</p>
<div class="codehilite"><pre>engineer init -m azure
</pre></div>


<p>If you have an existing site, you can simply use it, of course, but you may need to add your own <code>.deployment</code> file or configure the Azure deployment settings for your site yourself. There are more details&nbsp;below.</p>
<p>You can lay out your files however you wish, but the typical layout will look something like&nbsp;this:</p>
<div class="codehilite"><pre>/my-engineer-site
  - .deployment
  - config.yaml
    /content
    /templates
    /output
        /azure
</pre></div>


<p>Run the following command from the root of the folder to build your site for&nbsp;Azure:</p>
<div class="codehilite"><pre>engineer build -s ./config.yaml
</pre></div>


<p>The output will be written to <code>./output/azure/</code> by default. You can obviously change this in the Engineer settings, though note that you&#8217;ll have to make some other changes as well. Keep reading for further&nbsp;details.</p>
<p>Go to your Azure portal and create a new web site. Configure the site to automatically deploy from a GitHub/Bitbucket repository and connect it to your repository. You can also choose to use manual Git deployment if you wish, or even just <span class="caps">FTP</span> the site content, but I recommend the GitHub auto-publish route; it&#8217;s much simpler and&nbsp;automatic.</p>
<p>Now every time you push a new commit to GitHub/Bitbucket, your Azure site will update automatically with the contents of the <code>./output/azure/</code> folder. This magic works because of the <code>.deployment</code> file in your repository, which is created automatically by Engineer when you initialize a new site using <code>engineer init -m azure</code>. You can read more about this file here: <a href="https://github.com/projectkudu/kudu/wiki/Customizing-deployments">https://github.com/projectkudu/kudu/wiki/Customizing-deployments</a></p>
<p>If you want to change the output folder to a different path, you can do that in your Engineer config file. However, in addition, you&#8217;ll need to tell Azure that the location of the site content within your repository is different. This is contained in &#8211; you guessed it &#8211; the <code>.deployment</code> file. Just change the value of the &#8216;project&#8217; setting within that&nbsp;file.</p>
<p>If you prefer, you can remove the <code>.deployment</code> file altogether and configure the site root in the Azure portal directly. This is basically the same as the <code>.deployment</code> file approach, but if you have a single repository that contains multiple Engineer sites &#8211; or other types of sites, even &#8211; then using the settings in the Azure portal is preferable. From <a href="http://www.hanselman.com/blog/DeployingTWOWebsitesToWindowsAzureFromOneGitRepository.aspx">Scott Hanselman</a>:</p>
<blockquote>
<p>What&#8217;s nice about setting the &#8220;Project&#8221; setting via site configuration rather than via a <code>.deployment</code> file is that you can now push the same git repository containing two different web sites to two remote Azure web sites. Each Azure website should have a different project setting and will end up deploying the two different&nbsp;sites.</p>
</blockquote>
<p>That is <em>very</em> cool. Scott has more details in <a href="http://www.hanselman.com/blog/DeployingTWOWebsitesToWindowsAzureFromOneGitRepository.aspx">his post on the topic</a>.</p>
<p>Hopefully this helps you get your Engineer site up and running on Azure. As I mentioned before, I am going to be incorporating this information into the official Engineer docs as well. I&#8217;ve also gotten Engineer sites running on GitHub Pages, so I&#8217;ll cover that in a future&nbsp;post.</p>
<!--
In particular, GitHub offers a service called [GitHub Pages](http://pages.github.com/) that integrates wonderfully with Jekyll. Of course, if you're using Engineer, you're not using Jekyll,
-->
                                                            </article>
            </div>                                                <div class="row">
            <div class="post-info medium-3 large-2 columns">
            <div class="post-date">
                                    <div class="month">MAY</div>
                    <div class="day">05</div>
                    <div class="year">2014</div>
                    <div class="permalink">
                        <a href="/2014/05/engineer-v0-5-0-released/"
                           title="Permanent link to 'Engineer v0.5.0 Released'">∞</a>
                    </div>
                            </div>
                                        <ul class="tags">
                                            <li><a href="/tag/engineer">engineer</a>
                        </li>
                                            <li><a href="/tag/project">project</a>
                        </li>
                                    </ul>
                                </div>
    
                        <article class="post-content medium-9 large-10 columns">
                <time datetime="2014-05-05 PDT"
                      pubdate=""></time>
                <header>
                    <h1>
                        <a href="        /2014/05/engineer-v0-5-0-released/">Engineer v0.5.0 Released</a>
                                            </h1>
                </header>
                                    <p>I released the next major version of Engineer, version 0.5.0, last month. I didn&#8217;t quite meet all of my goals with the release (not the least of which was the release date, which was five months later than I had optimistically planned), but it&#8217;s a major one nonetheless. As usual, full release notes are available at <a href="https://engineer.readthedocs.org/en/master/changelog.html">Read the Docs</a>.</p>
<p>Unfortunately, upgrade may or may not work for you the normal way due to setuptools changes. There are more details in the <a href="https://engineer.readthedocs.org/en/master/upgrade.html">upgrade docs</a>.</p>
<p>Lots of cool stuff in this release, and more planned, so if you&#8217;ve not tried Engineer yet, now might be a good&nbsp;time.</p>
                                                            </article>
            </div>                        </div>
    <div class="row archives">
        <div class="small-12 columns post-links">
            <ul class="small-block-grid-3">
                <li>
                                            <a href="/page/3">← older posts</a>
                                    </li>
                <li style="text-align: center;">
                    <a href="/archives"> &ndash; archives &ndash; </a>
                </li>
                <li>
                                            <a href="/page/1">newer posts →</a>
                                    </li>
            </ul>
        </div>
    </div>
</section>
            </div>
        <div class="row">                <footer class="small-12 small-centered columns">                        <p>&copy; 2002-2015 Tyler Butler. All rights reserved.</p>

<p>Powered by <a href="http://www.tylerbutler.com/projects/engineer">engineer</a>.</p>                    </footer>
            </div>
    </div>
            <script src="/static/bundled/foundation.55babb4f.js"></script>
        
</body>
</html>